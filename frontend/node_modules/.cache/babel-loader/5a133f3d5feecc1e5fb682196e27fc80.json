{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/carinawollendorfer/selfix/frontend/src/views/TutorialCreation.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport TutorialService from '../services/TutorialService';\nimport BikeComponentService from '../services/BikeComponentService';\nimport ToolCategoryService from '../services/ToolCategoryService';\nimport TutorialCreationStepOne from '../components/cms/TutorialCreationStepOne';\nimport TutorialCreationStepTwo from '../components/cms/TutorialCreationStepTwo';\nimport TutorialCreationStepThree from '../components/cms/TutorialCreationStepThree';\nimport { Grid, Card, CardContent, Typography, Stepper, Step, StepLabel } from '@material-ui/core';\nimport FileuploadService from '../services/FileuploadService';\nimport { Alert } from '@material-ui/lab';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(() => ({\n  main: {\n    marginLeft: '280px',\n    marginRight: '50px',\n    height: '100%'\n  }\n}));\n\nfunction TutorialCreation(props) {\n  _s();\n\n  const classes = useStyles();\n  const stepLabels = ['Basic Tutorial Information', 'Tutorial Steps', 'Related Products'];\n  const [editMode, setEditMode] = React.useState();\n  const [errorText, setErrorText] = React.useState();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [steps, setSteps] = React.useState([]);\n  const [bikeComponents, setBikeComponents] = React.useState([]);\n  const [toolCategories, setToolCategories] = React.useState([]);\n  const [tutorialFile, setTutorialFile] = React.useState();\n  const [progress, setProgress] = React.useState(0);\n  const [tutorial, setTutorial] = React.useState({\n    name: '',\n    description: '',\n    imageUrl: '',\n    difficulty: 'Medium',\n    timeRequired: 60\n  });\n  let tutorialID;\n  React.useEffect(async () => {\n    if (props.match.params.tutorial) {\n      tutorialID = props.match.params.tutorial;\n      setEditMode(true);\n\n      try {\n        const tutorial = await TutorialService.getTutorialWithBikeComponents(tutorialID);\n        setTutorial(tutorial);\n        const tutorialSteps = tutorial.steps.map(obj => {\n          const step = {};\n          step.title = obj.title;\n          step.description = obj.description;\n          step.mediaUrl = obj.mediaUrl;\n          step.isPicStep = obj.type === 'text' ? true : false;\n          return step;\n        });\n        setSteps(tutorialSteps);\n        setBikeComponents(tutorial.bikeComponents.map(obj => ({ ...obj,\n          selected: true\n        })));\n        setToolCategories(tutorial.toolCategories.map(obj => ({ ...obj,\n          selected: true\n        })));\n      } catch (e) {\n        console.log(e);\n      }\n    } else {\n      setEditMode(false);\n    }\n  }, [props.match.params.tutorial]);\n  React.useEffect(() => {\n    (async () => {\n      await BikeComponentService.getBikeComponents().then(async data => {\n        setBikeComponents(data.map(obj => ({ ...obj,\n          selected: false\n        })));\n      });\n    })();\n  }, [props.match.params.id]);\n  React.useEffect(() => {\n    (async () => {\n      await ToolCategoryService.getToolCategories().then(async data => {\n        setToolCategories(data.map(obj => ({ ...obj,\n          selected: false\n        })));\n      });\n    })();\n  }, [props.match.params.id]);\n\n  const addStep = step => {\n    let updatedSteps = [...steps];\n    updatedSteps.push(step);\n    setSteps(updatedSteps);\n  };\n\n  const updateStep = (step, id) => {\n    let updatedSteps = [...steps];\n    updatedSteps[id] = step;\n    setSteps(updatedSteps);\n  };\n\n  const deleteStep = id => {\n    let updatedSteps = [...steps];\n    updatedSteps.splice(id, 1);\n    setSteps(updatedSteps);\n  };\n\n  const handleSliderChange = (propertyName, newValue) => {\n    setTutorial({ ...tutorial,\n      [propertyName]: newValue\n    });\n  };\n\n  const handleTutorialChange = event => {\n    setTutorial({ ...tutorial,\n      [event.target.name]: event.target.value\n    });\n  };\n  /**\n   * Sets the selected property to boolVal for the object of the\n   * state object with id in selectedIds.\n   * @param {*} state\n   * @param {*} setFunc\n   * @param {*} selectedIds\n   * @param {*} boolVal\n   */\n\n\n  const handleSelection = (state, setFunc, selectedIds, boolVal) => {\n    const selectedItems = state.filter(obj => selectedIds.includes(obj._id)).map(obj => ({ ...obj,\n      selected: boolVal\n    }));\n    let rest = state.filter(obj => !selectedIds.includes(obj._id));\n\n    if (boolVal === true) {\n      rest = state.filter(obj => !selectedIds.includes(obj._id)).map(obj => ({ ...obj,\n        selected: !boolVal\n      }));\n    }\n\n    setFunc([...rest, ...selectedItems]);\n  };\n\n  const handleBCSelection = rows => {\n    handleSelection(bikeComponents, setBikeComponents, rows.map(obj => obj._id), true);\n  };\n\n  const handleDeselectBC = id => {\n    handleSelection(bikeComponents, setBikeComponents, [id], false);\n  };\n\n  const handleTCSelection = rows => {\n    handleSelection(toolCategories, setToolCategories, rows.map(obj => obj._id), true);\n  };\n\n  const handleDeselectTC = id => {\n    handleSelection(toolCategories, setToolCategories, [id], false);\n  };\n\n  async function asyncForEach(array, callback) {\n    for (let index = 0; index < array.length; index++) {\n      await callback(array[index], index, array);\n    }\n  }\n\n  const postTutorial = async () => {\n    try {\n      setProgress(0);\n      let requestBody = {};\n      requestBody.tutorial = tutorial;\n      let fileuploadResponse = {};\n\n      if (tutorialFile) {\n        try {\n          fileuploadResponse = await FileuploadService.uploadCMS(tutorialFile, 'tutorial');\n\n          if (fileuploadResponse.files && fileuploadResponse.files.length > 0) {\n            requestBody.tutorial.imageUrl = fileuploadResponse.files[0];\n          } else {\n            setErrorText('Tutorial:' + fileuploadResponse.message);\n            setProgress(0);\n            return;\n          }\n        } catch (e) {\n          setErrorText('Tutorial: Error while file upload. Please go back to step 1.');\n          setProgress(0);\n          return;\n        }\n      }\n\n      setProgress(5);\n      requestBody.tutorial.toolCategories = [];\n      requestBody.tutorial.toolCategories = toolCategories.filter(obj => obj.selected).map(obj => obj._id);\n      requestBody.bikeComponentIds = toolCategories.filter(obj => obj.selected).map(obj => obj._id);\n      requestBody.textSteps = []; // List of text step objects\n\n      requestBody.videoSteps = []; // List of video step objects\n\n      await asyncForEach(steps, async step => {\n        if (step.file) {\n          try {\n            fileuploadResponse = await FileuploadService.uploadCMS(step.file, 'tutorialstep');\n\n            if (fileuploadResponse.files && fileuploadResponse.files.length > 0) {\n              step.mediaUrl = fileuploadResponse.files[0];\n            } else {\n              setErrorText('Step ' + step.title + ':' + fileuploadResponse.message);\n              setProgress(0);\n              return;\n            }\n          } catch (e) {\n            setErrorText('Step ' + step.title + ': Error while uploading file. Please go back to step 2.');\n            setProgress(0);\n            return;\n          }\n        }\n\n        setProgress(progress + 100 / (steps.length + 1));\n        delete step.file;\n      });\n      steps.map((step, index) => {\n        step['position'] = index;\n        const isPicStep = step.isPicStep;\n        delete step.isPicStep;\n\n        if (isPicStep) {\n          requestBody.textSteps.push(step);\n        } else {\n          requestBody.videoSteps.push(step);\n        }\n      });\n\n      if (editMode) {\n        await TutorialService.updateTutorial(requestBody);\n      } else {\n        console.log(requestBody);\n        await TutorialService.createTutorial(requestBody);\n      }\n\n      setProgress(100);\n      props.history.push('/admin/tutorials');\n    } catch (error) {\n      console.error(error);\n      setProgress(0);\n    }\n  };\n\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.main,\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          justify: \"center\",\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 10,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h4\",\n              noWrap: true,\n              children: \"Create New Tutorial\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), errorText && /*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"error\",\n              onClose: () => setErrorText(undefined),\n              children: errorText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Stepper, {\n              activeStep: activeStep,\n              alternativeLabel: true,\n              children: stepLabels.map((label, index) => {\n                return /*#__PURE__*/_jsxDEV(Step, {\n                  children: /*#__PURE__*/_jsxDEV(StepLabel, {\n                    children: label\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 23\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 10,\n            children: (() => {\n              switch (activeStep) {\n                case 0:\n                  return /*#__PURE__*/_jsxDEV(TutorialCreationStepOne, {\n                    setErrorText: setErrorText,\n                    setTutorialFile: setTutorialFile,\n                    tutorialFile: tutorialFile,\n                    handleTutorialChange: handleTutorialChange,\n                    handleSliderChange: handleSliderChange,\n                    tutorial: tutorial,\n                    handleSubmit: handleNext\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 23\n                  }, this);\n\n                case 1:\n                  return /*#__PURE__*/_jsxDEV(TutorialCreationStepTwo, {\n                    setErrorText: setErrorText,\n                    addStep: addStep,\n                    updateStep: updateStep,\n                    deleteStep: deleteStep,\n                    setSteps: setSteps,\n                    steps: steps,\n                    handleBack: handleBack,\n                    handleSubmit: handleNext\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 23\n                  }, this);\n\n                case 2:\n                  return /*#__PURE__*/_jsxDEV(TutorialCreationStepThree, {\n                    handleTCSelection: handleTCSelection,\n                    handleDeselectBC: handleDeselectBC,\n                    bikeComponents: bikeComponents,\n                    handleBCSelection: handleBCSelection,\n                    handleDeselectTC: handleDeselectTC,\n                    toolCategories: toolCategories,\n                    tutorialFile: tutorialFile,\n                    handleBack: handleBack,\n                    handleSubmit: postTutorial\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 23\n                  }, this);\n              }\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), progress > 0 && /*#__PURE__*/_jsxDEV(LinearProgress, {\n        variant: \"determinate\",\n        value: progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TutorialCreation, \"Qg4vevGtfmSBVToRt8Y/1d0+7q4=\", false, function () {\n  return [useStyles];\n});\n\n_c = TutorialCreation;\nexport default TutorialCreation;\n\nvar _c;\n\n$RefreshReg$(_c, \"TutorialCreation\");","map":{"version":3,"sources":["/Users/carinawollendorfer/selfix/frontend/src/views/TutorialCreation.js"],"names":["React","TutorialService","BikeComponentService","ToolCategoryService","TutorialCreationStepOne","TutorialCreationStepTwo","TutorialCreationStepThree","Grid","Card","CardContent","Typography","Stepper","Step","StepLabel","FileuploadService","Alert","LinearProgress","makeStyles","useStyles","main","marginLeft","marginRight","height","TutorialCreation","props","classes","stepLabels","editMode","setEditMode","useState","errorText","setErrorText","activeStep","setActiveStep","steps","setSteps","bikeComponents","setBikeComponents","toolCategories","setToolCategories","tutorialFile","setTutorialFile","progress","setProgress","tutorial","setTutorial","name","description","imageUrl","difficulty","timeRequired","tutorialID","useEffect","match","params","getTutorialWithBikeComponents","tutorialSteps","map","obj","step","title","mediaUrl","isPicStep","type","selected","e","console","log","getBikeComponents","then","data","id","getToolCategories","addStep","updatedSteps","push","updateStep","deleteStep","splice","handleSliderChange","propertyName","newValue","handleTutorialChange","event","target","value","handleSelection","state","setFunc","selectedIds","boolVal","selectedItems","filter","includes","_id","rest","handleBCSelection","rows","handleDeselectBC","handleTCSelection","handleDeselectTC","asyncForEach","array","callback","index","length","postTutorial","requestBody","fileuploadResponse","uploadCMS","files","message","bikeComponentIds","textSteps","videoSteps","file","updateTutorial","createTutorial","history","error","handleNext","prevActiveStep","handleBack","undefined","label"],"mappings":"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","sourcesContent":["import React from 'react';\nimport TutorialService from '../services/TutorialService';\nimport BikeComponentService from '../services/BikeComponentService';\nimport ToolCategoryService from '../services/ToolCategoryService';\nimport TutorialCreationStepOne from '../components/cms/TutorialCreationStepOne';\nimport TutorialCreationStepTwo from '../components/cms/TutorialCreationStepTwo';\nimport TutorialCreationStepThree from '../components/cms/TutorialCreationStepThree';\nimport { Grid, Card, CardContent, Typography, Stepper, Step, StepLabel } from '@material-ui/core';\nimport FileuploadService from '../services/FileuploadService';\nimport { Alert } from '@material-ui/lab';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles(() => ({\n  main: {\n    marginLeft: '280px',\n    marginRight: '50px',\n    height: '100%'\n  }\n}));\n\nfunction TutorialCreation(props) {\n  const classes = useStyles();\n  const stepLabels = ['Basic Tutorial Information', 'Tutorial Steps', 'Related Products'];\n\n  const [editMode, setEditMode] = React.useState();\n  const [errorText, setErrorText] = React.useState();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [steps, setSteps] = React.useState([]);\n  const [bikeComponents, setBikeComponents] = React.useState([]);\n  const [toolCategories, setToolCategories] = React.useState([]);\n  const [tutorialFile, setTutorialFile] = React.useState();\n  const [progress, setProgress] = React.useState(0);\n  const [tutorial, setTutorial] = React.useState({\n    name: '',\n    description: '',\n    imageUrl: '',\n    difficulty: 'Medium',\n    timeRequired: 60,\n  });\n\n  let tutorialID;\n\n  React.useEffect(async () => {\n    if (props.match.params.tutorial) {\n      tutorialID = props.match.params.tutorial;\n      setEditMode(true);\n\n      try {\n        const tutorial = await TutorialService.getTutorialWithBikeComponents(tutorialID);\n        setTutorial(tutorial);\n\n        const tutorialSteps = tutorial.steps.map((obj) => {\n          const step = {};\n          step.title = obj.title;\n          step.description = obj.description;\n          step.mediaUrl = obj.mediaUrl;\n          step.isPicStep = obj.type === 'text' ? true : false;\n          return step;\n        });\n        setSteps(tutorialSteps);\n        setBikeComponents(tutorial.bikeComponents.map((obj) => ({ ...obj, selected: true })));\n        setToolCategories(tutorial.toolCategories.map((obj) => ({ ...obj, selected: true })));\n      } catch(e) {\n        console.log(e);\n      }\n    } else {\n      setEditMode(false);\n    }\n  }, [props.match.params.tutorial]);\n\n  React.useEffect(() => {\n    (async () => {\n      await BikeComponentService.getBikeComponents().then(async (data) => {\n        setBikeComponents(data.map((obj) => ({ ...obj, selected: false })));\n      });\n    })();\n  }, [props.match.params.id]);\n\n  React.useEffect(() => {\n    (async () => {\n      await ToolCategoryService.getToolCategories().then(async (data) => {\n        setToolCategories(data.map((obj) => ({ ...obj, selected: false })));\n      });\n    })();\n  }, [props.match.params.id]);\n\n  const addStep = (step) => {\n    let updatedSteps = [...steps];\n    updatedSteps.push(step);\n    setSteps(updatedSteps);\n  };\n\n  const updateStep = (step, id) => {\n    let updatedSteps = [...steps];\n    updatedSteps[id] = step;\n    setSteps(updatedSteps);\n  };\n\n  const deleteStep = (id) => {\n    let updatedSteps = [...steps];\n    updatedSteps.splice(id, 1);\n    setSteps(updatedSteps);\n  };\n\n  const handleSliderChange = (propertyName, newValue) => {\n    setTutorial({\n      ...tutorial,\n      [propertyName]: newValue,\n    });\n  };\n\n  const handleTutorialChange = (event) => {\n    setTutorial({\n      ...tutorial,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  /**\n   * Sets the selected property to boolVal for the object of the\n   * state object with id in selectedIds.\n   * @param {*} state\n   * @param {*} setFunc\n   * @param {*} selectedIds\n   * @param {*} boolVal\n   */\n  const handleSelection = (state, setFunc, selectedIds, boolVal) => {\n    const selectedItems = state\n      .filter((obj) => selectedIds.includes(obj._id))\n      .map((obj) => ({ ...obj, selected: boolVal }));\n\n    let rest = state.filter((obj) => !selectedIds.includes(obj._id));\n    if (boolVal === true) {\n      rest = state.filter((obj) => !selectedIds.includes(obj._id)).map((obj) => ({ ...obj, selected: !boolVal }));\n    }\n    setFunc([...rest, ...selectedItems]);\n  };\n\n  const handleBCSelection = (rows) => {\n    handleSelection(bikeComponents, setBikeComponents, rows.map((obj) => obj._id), true);\n  };\n  const handleDeselectBC = (id) => {\n    handleSelection(bikeComponents, setBikeComponents, [id], false);\n  };\n\n  const handleTCSelection = (rows) => {\n    handleSelection(toolCategories, setToolCategories, rows.map((obj) => obj._id), true);\n  };\n  const handleDeselectTC = (id) => {\n    handleSelection(toolCategories, setToolCategories, [id], false);\n  };\n\n  async function asyncForEach(array, callback) {\n    for (let index = 0; index < array.length; index++) {\n      await callback(array[index], index, array);\n    }\n  }\n\n  const postTutorial = async () => {\n    try {\n      setProgress(0);\n      let requestBody = {};\n      requestBody.tutorial = tutorial;\n      let fileuploadResponse = {};\n      if (tutorialFile) {\n        try{\n          fileuploadResponse = await FileuploadService.uploadCMS(tutorialFile, 'tutorial');\n          if (fileuploadResponse.files && fileuploadResponse.files.length > 0) {\n            requestBody.tutorial.imageUrl = fileuploadResponse.files[0];\n          } else {\n            setErrorText('Tutorial:' + fileuploadResponse.message);\n            setProgress(0);\n            return;\n          }\n        } catch(e) {\n          setErrorText('Tutorial: Error while file upload. Please go back to step 1.');\n          setProgress(0);\n          return;\n        }\n      }\n      setProgress(5);\n      requestBody.tutorial.toolCategories = [];\n      requestBody.tutorial.toolCategories = toolCategories.filter((obj) => obj.selected).map((obj) => obj._id);\n\n      requestBody.bikeComponentIds = toolCategories.filter((obj) => obj.selected).map((obj) => obj._id);\n\n      requestBody.textSteps = []; // List of text step objects\n      requestBody.videoSteps = []; // List of video step objects\n\n      await asyncForEach(steps, async (step) => {\n        if (step.file) {\n          try{\n            fileuploadResponse = await FileuploadService.uploadCMS(step.file, 'tutorialstep');\n            if (fileuploadResponse.files && fileuploadResponse.files.length > 0) {\n              step.mediaUrl = fileuploadResponse.files[0];\n            } else {\n              setErrorText('Step ' + step.title + ':' + fileuploadResponse.message);\n              setProgress(0);\n              return;\n            }\n          }catch(e){\n            setErrorText('Step ' + step.title + ': Error while uploading file. Please go back to step 2.');\n            setProgress(0);\n            return;\n          }\n        }\n        setProgress(progress + 100 / (steps.length + 1));\n        delete step.file;\n      });\n\n      steps.map((step, index) => {\n        step['position'] = index;\n        const isPicStep = step.isPicStep;\n        delete step.isPicStep;\n\n        if (isPicStep) {\n          requestBody.textSteps.push(step);\n        } else {\n          requestBody.videoSteps.push(step);\n        }\n      });\n\n      if (editMode) {\n        await TutorialService.updateTutorial(requestBody);\n      } else {\n        console.log(requestBody);\n        await TutorialService.createTutorial(requestBody);\n      }\n\n      setProgress(100);\n      props.history.push('/admin/tutorials');\n    } catch (error) {\n      console.error(error);\n      setProgress(0);\n    }\n  };\n\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  return (\n\n    <div className={classes.main}>\n      <Card>\n        <CardContent>\n          <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\n            <Grid item xs={10}>\n              <Typography variant=\"h4\" noWrap>\n                Create New Tutorial\n              </Typography>\n              {errorText && (\n                <Alert severity=\"error\" onClose={() => setErrorText(undefined)}>\n                  {errorText}\n                </Alert>\n              )}\n            </Grid>\n            <Grid item xs={12}>\n              <Stepper activeStep={activeStep} alternativeLabel>\n                {stepLabels.map((label, index) => {\n                  return (\n                    <Step key={index}>\n                      <StepLabel>{label}</StepLabel>\n                    </Step>\n                  );\n                })}\n              </Stepper>\n            </Grid>\n\n            <Grid item xs={10}>\n              {(() => {\n                switch (activeStep) {\n                  case 0:\n                    return (\n                      <TutorialCreationStepOne\n                        setErrorText={setErrorText}\n                        setTutorialFile={setTutorialFile}\n                        tutorialFile={tutorialFile}\n                        handleTutorialChange={handleTutorialChange}\n                        handleSliderChange={handleSliderChange}\n                        tutorial={tutorial}\n                        handleSubmit={handleNext}\n                      />\n                    );\n                  case 1:\n                    return (\n                      <TutorialCreationStepTwo\n                        setErrorText={setErrorText}\n                        addStep={addStep}\n                        updateStep={updateStep}\n                        deleteStep={deleteStep}\n                        setSteps={setSteps}\n                        steps={steps}\n                        handleBack={handleBack}\n                        handleSubmit={handleNext}\n                      />\n                    );\n                  case 2:\n                    return (\n                      <TutorialCreationStepThree\n                        handleTCSelection={handleTCSelection}\n                        handleDeselectBC={handleDeselectBC}\n                        bikeComponents={bikeComponents}\n                        handleBCSelection={handleBCSelection}\n                        handleDeselectTC={handleDeselectTC}\n                        toolCategories={toolCategories}\n                        tutorialFile={tutorialFile}\n                        handleBack={handleBack}\n                        handleSubmit={postTutorial}\n                      />\n                    );\n                }\n              })()}\n            </Grid>\n          </Grid>\n        </CardContent>\n        {progress > 0 && <LinearProgress variant=\"determinate\" value={progress} />}\n      </Card>\n    </div>\n  );\n}\n\nexport default TutorialCreation;\n"]},"metadata":{},"sourceType":"module"}