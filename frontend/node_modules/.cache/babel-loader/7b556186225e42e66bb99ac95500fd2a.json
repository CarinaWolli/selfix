{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/carinawollendorfer/selfix/frontend/src/components/cms/TutorialTable.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { AgGridColumn, AgGridReact } from 'ag-grid-react';\nimport { withRouter } from 'react-router-dom';\nimport TutorialService from '../../services/TutorialService';\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\nimport moment from 'moment';\nimport { Edit, Delete, Remove } from '@material-ui/icons';\nimport { Button } from '@material-ui/core';\nimport Zoom from 'react-medium-image-zoom';\nimport 'react-medium-image-zoom/dist/styles.css';\nimport DeleteDialog from './DeleteDialog';\nimport DeleteManyDialog from './DeleteManyDialog';\n\nconst ThumbRenderer = params => {\n  return /*#__PURE__*/_jsxDEV(Zoom, {\n    wrapStyle: {\n      display: 'block'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"img\", {\n      loading: \"lazy\",\n      src: params.value,\n      alt: \"Thumbnail\",\n      style: {\n        display: 'block',\n        width: 35,\n        height: 'auto'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 49\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 11\n  }, this);\n};\n\n_c = ThumbRenderer;\n\nconst EditButtonRenderer = () => {\n  return /*#__PURE__*/_jsxDEV(Edit, {\n    fontSize: \"small\",\n    style: {\n      display: 'block',\n      margin: 'auto'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 10\n  }, this);\n};\n\n_c2 = EditButtonRenderer;\n\nconst DeleteButtonRenderer = () => {\n  return /*#__PURE__*/_jsxDEV(Delete, {\n    fontSize: \"small\",\n    style: {\n      display: 'block',\n      margin: 'auto'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 10\n  }, this);\n};\n\n_c3 = DeleteButtonRenderer;\n\nconst dateFormatter = params => {\n  const date = params.value;\n  let momentDate = moment(date);\n  return momentDate.toString();\n};\n\nconst TutorialTable = props => {\n  _s();\n\n  const [open, setOpen] = React.useState(false);\n  const [openDeleteMany, setOpenDeleteMany] = React.useState(false);\n  const [tutorialsToDelete, setTutorialsToDelete] = React.useState(null);\n  const [tutorialToDelete, setTutorialToDelete] = React.useState(null);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setTutorialToDelete(null);\n  };\n\n  const handleDelete = () => {\n    TutorialService.deleteTutorial(tutorialToDelete._id);\n    setTableData(tableData.filter(value => value._id !== tutorialToDelete._id));\n    setOpen(false);\n    setTutorialToDelete(null);\n  };\n\n  const handleClickOpenDeleteMany = () => {\n    setTutorialsToDelete(gridApi ? gridApi.getSelectedRows().map(value => value._id) : []);\n    setOpenDeleteMany(true);\n  };\n\n  const handleCloseDeleteMany = () => {\n    setTutorialsToDelete(null);\n    setOpenDeleteMany(false);\n  };\n\n  const handleDeleteMany = async () => {\n    try {\n      await TutorialService.deleteManyTutorials(tutorialsToDelete);\n      setTableData(tableData.filter(value => !tutorialsToDelete.includes(value._id)));\n    } catch (e) {\n      console.log(e);\n    }\n\n    setTutorialsToDelete(null);\n    setOpenDeleteMany(false);\n  };\n\n  const [tableData, setTableData] = React.useState([]);\n  const [gridApi, setGridApi] = React.useState(null);\n  React.useEffect(async () => {\n    try {\n      const result = await TutorialService.getTutorials();\n      setTableData(result);\n    } catch (e) {\n      console.log(e);\n    }\n  }, []);\n\n  const onFirstDataRendered = params => {\n    params.api.sizeColumnsToFit();\n  };\n\n  const onGridSizeChanged = params => {\n    params.api.sizeColumnsToFit();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ag-theme-alpine\",\n    style: {\n      height: 600\n    },\n    children: [/*#__PURE__*/_jsxDEV(AgGridReact, {\n      rowData: tableData,\n      onGridReady: params => setGridApi(params.api),\n      onFirstDataRendered: onFirstDataRendered,\n      onGridSizeChanged: onGridSizeChanged,\n      frameworkComponents: {\n        thumbrenderer: ThumbRenderer,\n        editbutton: EditButtonRenderer,\n        deletebutton: DeleteButtonRenderer\n      },\n      defaultColDef: {\n        sortable: true,\n        filter: true\n      },\n      rowSelection: \"multiple\",\n      enableBrowserTooltips: true,\n      children: [/*#__PURE__*/_jsxDEV(AgGridColumn, {\n        field: \"imageUrl\",\n        minWidth: 20,\n        headerName: \"Thumbnail\",\n        cellRenderer: \"thumbrenderer\",\n        checkboxSelection: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgGridColumn, {\n        field: \"name\",\n        minWidth: 80,\n        onCellClicked: params => {\n          props.history.push('/tutorial/' + params.data._id);\n        },\n        tooltipField: \"name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgGridColumn, {\n        field: \"description\",\n        minWidth: 80,\n        maxWidth: 400\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgGridColumn, {\n        field: \"textSteps.length\",\n        headerName: \"Text Steps\",\n        minWidth: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgGridColumn, {\n        field: \"videoSteps.length\",\n        headerName: \"Video Steps\",\n        minWidth: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgGridColumn, {\n        field: \"creationDate\",\n        minWidth: 80,\n        headerName: \"Creation Date\",\n        valueFormatter: dateFormatter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgGridColumn, {\n        field: \"lastUpdatedDate\",\n        minWidth: 80,\n        headerName: \"Last Update\",\n        valueFormatter: dateFormatter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgGridColumn, {\n        width: 20,\n        cellRenderer: \"editbutton\",\n        onCellClicked: params => props.history.push('/admin/tutorialcreation/' + params.data._id),\n        cellStyle: {\n          'height': '100%',\n          'display': 'flex ',\n          'justify-content': 'center',\n          'align-items': 'center '\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgGridColumn, {\n        width: 20,\n        cellRenderer: \"deletebutton\",\n        cellStyle: {\n          'height': '100%',\n          'display': 'flex ',\n          'justify-content': 'center',\n          'align-items': 'center '\n        },\n        onCellClicked: params => {\n          setTutorialToDelete(params.data);\n          handleClickOpen();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"small\",\n      startIcon: /*#__PURE__*/_jsxDEV(Remove, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 20\n      }, this),\n      style: {\n        display: 'flex',\n        marginLeft: 'auto',\n        marginTop: '5px',\n        marginBottom: '8px'\n      },\n      onClick: handleClickOpenDeleteMany,\n      children: \"Delete Selected\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteManyDialog, {\n      open: openDeleteMany,\n      handleClose: handleCloseDeleteMany,\n      handleDelete: handleDeleteMany,\n      names: gridApi ? gridApi.getSelectedRows().map(item => item.name) : []\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteDialog, {\n      open: open,\n      handleClose: handleClose,\n      handleDelete: handleDelete,\n      name: tutorialToDelete ? tutorialToDelete.name : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TutorialTable, \"KvEjQkwQaReN+PMnakMbC4EkbiQ=\");\n\n_c4 = TutorialTable;\nexport default _c5 = withRouter(TutorialTable);\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"ThumbRenderer\");\n$RefreshReg$(_c2, \"EditButtonRenderer\");\n$RefreshReg$(_c3, \"DeleteButtonRenderer\");\n$RefreshReg$(_c4, \"TutorialTable\");\n$RefreshReg$(_c5, \"%default%\");","map":{"version":3,"sources":["/Users/carinawollendorfer/selfix/frontend/src/components/cms/TutorialTable.js"],"names":["React","AgGridColumn","AgGridReact","withRouter","TutorialService","moment","Edit","Delete","Remove","Button","Zoom","DeleteDialog","DeleteManyDialog","ThumbRenderer","params","display","value","width","height","EditButtonRenderer","margin","DeleteButtonRenderer","dateFormatter","date","momentDate","toString","TutorialTable","props","open","setOpen","useState","openDeleteMany","setOpenDeleteMany","tutorialsToDelete","setTutorialsToDelete","tutorialToDelete","setTutorialToDelete","handleClickOpen","handleClose","handleDelete","deleteTutorial","_id","setTableData","tableData","filter","handleClickOpenDeleteMany","gridApi","getSelectedRows","map","handleCloseDeleteMany","handleDeleteMany","deleteManyTutorials","includes","e","console","log","setGridApi","useEffect","result","getTutorials","onFirstDataRendered","api","sizeColumnsToFit","onGridSizeChanged","thumbrenderer","editbutton","deletebutton","sortable","history","push","data","marginLeft","marginTop","marginBottom","item","name"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { AgGridColumn, AgGridReact } from 'ag-grid-react';\nimport { withRouter } from 'react-router-dom';\nimport TutorialService from '../../services/TutorialService';\n\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\nimport moment from 'moment';\nimport { Edit ,Delete, Remove } from '@material-ui/icons';\nimport { Button } from '@material-ui/core';\nimport Zoom from 'react-medium-image-zoom';\nimport 'react-medium-image-zoom/dist/styles.css';\nimport DeleteDialog from './DeleteDialog';\nimport DeleteManyDialog from './DeleteManyDialog';\n\nconst ThumbRenderer = (params) => {\n  return (<Zoom wrapStyle={{ display: 'block'}}><img loading='lazy' src={params.value} alt='Thumbnail' style={{display: 'block', width: 35, height: 'auto' }} /></Zoom>);\n};\n\nconst EditButtonRenderer = () => {\n  return <Edit fontSize='small' style={{display: 'block', margin: 'auto'}}/>;\n};\n\nconst DeleteButtonRenderer = () => {\n  return <Delete fontSize='small' style={{display: 'block', margin: 'auto'}}/>;\n};\n\nconst dateFormatter = (params) => {\n  const date = params.value;\n  let momentDate = moment(date);\n  return momentDate.toString();\n};\n\nconst TutorialTable = (props) => {\n\n  const [open, setOpen] = React.useState(false);\n  const [openDeleteMany, setOpenDeleteMany] = React.useState(false);\n  const [tutorialsToDelete, setTutorialsToDelete] = React.useState(null);\n\n  const [tutorialToDelete, setTutorialToDelete] = React.useState(null);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setTutorialToDelete(null);\n  };\n\n  const handleDelete = () => {\n    TutorialService.deleteTutorial(tutorialToDelete._id);\n    setTableData(tableData.filter((value) => value._id !== tutorialToDelete._id));\n    setOpen(false);\n    setTutorialToDelete(null);\n  };\n\n  const handleClickOpenDeleteMany = () => {\n    setTutorialsToDelete(gridApi ? gridApi.getSelectedRows().map((value) => value._id) : []);\n    setOpenDeleteMany(true);\n  };\n\n  const handleCloseDeleteMany = () => {\n    setTutorialsToDelete(null);\n    setOpenDeleteMany(false);\n  };\n\n  const handleDeleteMany = async () => {\n    try {\n      await TutorialService.deleteManyTutorials(tutorialsToDelete);\n      setTableData(tableData.filter((value) => !tutorialsToDelete.includes(value._id)));\n    } catch(e) {\n      console.log(e);\n    }\n    setTutorialsToDelete(null);\n    setOpenDeleteMany(false);\n  };\n\n\n  const [tableData,setTableData] = React.useState([]);\n  const [gridApi,setGridApi] = React.useState(null);\n\n  React.useEffect(async () => {\n    try{\n      const result = await TutorialService.getTutorials();\n      setTableData(result);\n    }catch(e) {\n      console.log(e);\n    }\n  },[]);\n\n  const onFirstDataRendered = (params) => {\n    params.api.sizeColumnsToFit();\n  };\n\n  const onGridSizeChanged = (params) => {\n    params.api.sizeColumnsToFit();\n  };\n\n  return (\n    <div className='ag-theme-alpine' style={{ height: 600 }}>\n      <AgGridReact rowData={tableData}\n        onGridReady={(params) => setGridApi(params.api)}\n        onFirstDataRendered={onFirstDataRendered}\n        onGridSizeChanged={onGridSizeChanged}\n        frameworkComponents={{\n          thumbrenderer: ThumbRenderer,\n          editbutton: EditButtonRenderer,\n          deletebutton: DeleteButtonRenderer,\n        }}\n        defaultColDef={{\n          sortable: true,\n          filter: true,\n        }}\n        rowSelection='multiple'\n        enableBrowserTooltips\n      >\n        <AgGridColumn\n          field='imageUrl'\n          minWidth={20}\n          headerName='Thumbnail'\n          cellRenderer='thumbrenderer'\n          checkboxSelection={true}\n        />\n        <AgGridColumn\n          field='name'\n          minWidth={80}\n          onCellClicked={(params) => {\n            props.history.push('/tutorial/' + params.data._id);\n          }}\n          tooltipField='name'\n        />\n        <AgGridColumn\n          field='description'\n          minWidth={80}\n          maxWidth={400}\n        />\n        <AgGridColumn\n          field='textSteps.length'\n          headerName='Text Steps'\n          minWidth={20}\n        />\n        <AgGridColumn\n          field='videoSteps.length'\n          headerName='Video Steps'\n          minWidth={20}\n        />\n        <AgGridColumn\n          field='creationDate'\n          minWidth={80}\n          headerName='Creation Date'\n          valueFormatter={dateFormatter}\n        />\n        <AgGridColumn\n          field='lastUpdatedDate'\n          minWidth={80}\n          headerName='Last Update'\n          valueFormatter={dateFormatter}\n        />\n        <AgGridColumn\n          width={20}\n          cellRenderer='editbutton'\n          onCellClicked={(params)=> props.history.push('/admin/tutorialcreation/' + params.data._id)}\n          cellStyle={{\n            'height': '100%',\n            'display': 'flex ',\n            'justify-content': 'center',\n            'align-items': 'center ',\n          }}\n        />\n        <AgGridColumn\n          width={20}\n          cellRenderer='deletebutton'\n          cellStyle={{\n            'height': '100%',\n            'display': 'flex ',\n            'justify-content': 'center',\n            'align-items': 'center ',\n          }}\n          onCellClicked={(params) => {\n            setTutorialToDelete(params.data);\n            handleClickOpen();\n          }}\n        />\n      </AgGridReact>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        size=\"small\"\n        startIcon={<Remove />}\n        style={{\n          display: 'flex',\n          marginLeft: 'auto',\n          marginTop: '5px',\n          marginBottom: '8px'\n        }}\n        onClick={handleClickOpenDeleteMany}\n      >\n        Delete Selected\n      </Button>\n      <DeleteManyDialog\n        open={openDeleteMany}\n        handleClose={handleCloseDeleteMany}\n        handleDelete={handleDeleteMany}\n        names={gridApi ? gridApi.getSelectedRows().map((item) => item.name) : []}\n      />\n      <DeleteDialog\n        open={open}\n        handleClose={handleClose}\n        handleDelete={handleDelete}\n        name={tutorialToDelete ? tutorialToDelete.name : ''}/>\n    </div>\n  );\n};\n\nexport default withRouter(TutorialTable);\n"]},"metadata":{},"sourceType":"module"}