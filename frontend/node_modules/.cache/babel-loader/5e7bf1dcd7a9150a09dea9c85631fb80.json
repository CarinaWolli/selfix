{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/carinawollendorfer/selfix/frontend/src/components/AutocompleteSearchComponent.js\",\n    _s = $RefreshSig$();\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { debounce, InputAdornment, TextField } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport BikeService from '../services/BikeService';\nimport PropTypes from 'prop-types';\nconst useStyles = makeStyles(theme => ({\n  searchField: {\n    paddingLeft: theme.spacing(1)\n  },\n  searchTextField: {\n    backgroundColor: theme.palette.common.white,\n    borderRadius: 4\n  }\n}));\n\nfunction AutocompleteSearchComponent(props) {\n  _s();\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [options, setOptions] = React.useState([]);\n  const [input, setInput] = React.useState('');\n  const [loading, setLoading] = React.useState(false);\n  React.useEffect(() => {\n    const debounceSearch = debounce(() => {\n      setLoading(true);\n      let active = true;\n\n      if (input.length < 3) {\n        setLoading(false);\n        setOptions([]);\n        return undefined;\n      }\n\n      (async () => {\n        try {\n          const bikes = await BikeService.searchBike(input);\n\n          if (active) {\n            setOptions(bikes);\n          }\n        } catch (e) {\n          console.log(e);\n        }\n      })();\n\n      return () => {\n        active = false;\n        setLoading(false);\n      };\n    }, 1000);\n    debounceSearch();\n  }, [input]);\n  React.useEffect(() => {\n    if (!open) {\n      setOptions([]);\n    }\n  }, [open]);\n  return /*#__PURE__*/_jsxDEV(Autocomplete, {\n    className: classes.searchField,\n    style: {\n      flex: 1\n    },\n    open: open,\n    onOpen: () => {\n      setOpen(true);\n    },\n    onClose: () => {\n      setOpen(false);\n    },\n    inputValue: input,\n    onInputChange: (event, newInputValue) => {\n      setInput(newInputValue);\n    },\n    onChange: (event, value, reason) => {\n      if (event.keyCode === 13 && value) {\n        if (typeof value === 'object') {\n          props.history.push('/bike/' + value._id);\n        } else {\n          props.history.push('/search/' + value);\n        }\n      } else if (reason === 'select-option' && value) {\n        props.history.push('/bike/' + value._id);\n      }\n    },\n    freeSolo: true,\n    loading: loading,\n    getOptionSelected: (option, value) => option.name === value.name,\n    getOptionLabel: option => typeof option === 'object' && option !== null ? option.name : option,\n    options: options,\n    renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n      margin: \"dense\",\n      variant: props.variant,\n      className: classes.searchTextField,\n      InputProps: { ...params.InputProps,\n        placeholder: 'Search for your bike...',\n        startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n          position: \"start\",\n          children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 11\n  }, this);\n} // attributes of props and their type\n\n\n_s(AutocompleteSearchComponent, \"k+aD5iw4TAnAEWcYa17RgwaJeyo=\", false, function () {\n  return [useStyles];\n});\n\n_c = AutocompleteSearchComponent;\nAutocompleteSearchComponent.propTypes = {\n  variant: PropTypes.string\n};\nexport default withRouter(connect()(AutocompleteSearchComponent));\n\nvar _c;\n\n$RefreshReg$(_c, \"AutocompleteSearchComponent\");","map":{"version":3,"sources":["/Users/carinawollendorfer/selfix/frontend/src/components/AutocompleteSearchComponent.js"],"names":["makeStyles","debounce","InputAdornment","TextField","SearchIcon","Autocomplete","React","connect","withRouter","BikeService","PropTypes","useStyles","theme","searchField","paddingLeft","spacing","searchTextField","backgroundColor","palette","common","white","borderRadius","AutocompleteSearchComponent","props","classes","open","setOpen","useState","options","setOptions","input","setInput","loading","setLoading","useEffect","debounceSearch","active","length","undefined","bikes","searchBike","e","console","log","flex","event","newInputValue","value","reason","keyCode","history","push","_id","option","name","params","variant","InputProps","placeholder","startAdornment","propTypes","string"],"mappings":"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","sourcesContent":["import {makeStyles} from '@material-ui/core/styles';\nimport {debounce, InputAdornment, TextField} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router-dom';\nimport BikeService from '../services/BikeService';\nimport PropTypes from 'prop-types';\n\nconst useStyles = makeStyles((theme) => ({\n  searchField: {\n    paddingLeft: theme.spacing(1),\n  },\n  searchTextField: {\n    backgroundColor: theme.palette.common.white,\n    borderRadius: 4,\n  },\n}));\n\nfunction AutocompleteSearchComponent(props) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [options, setOptions] = React.useState([]);\n  const [input, setInput] = React.useState('');\n  const [loading, setLoading] = React.useState(false);\n\n  React.useEffect(() => {\n    const debounceSearch = debounce(() => {\n      setLoading(true);\n      let active = true;\n\n      if (input.length < 3) {\n        setLoading(false);\n        setOptions([]);\n        return undefined;\n      }\n\n      (async () => {\n        try{\n          const bikes = await BikeService.searchBike(input);\n\n          if (active) {\n            setOptions(bikes);\n          }\n        } catch(e) {\n          console.log(e);\n        }\n      })();\n\n      return () => {\n        active = false;\n        setLoading(false);\n      };\n    }, 1000);\n    debounceSearch();\n  }, [input]);\n\n  React.useEffect(() => {\n    if (!open) {\n      setOptions([]);\n    }\n  }, [open]);\n\n  return (<Autocomplete\n    className={classes.searchField}\n    style={{flex: 1}}\n    open={open}\n    onOpen={() => {\n      setOpen(true);\n    }}\n    onClose={() => {\n      setOpen(false);\n    }}\n    inputValue={input}\n    onInputChange={(event, newInputValue) => {\n      setInput(newInputValue);\n    }}\n    onChange={(event, value, reason) => {\n      if (event.keyCode === 13 && value) {\n        if(typeof value === 'object'){\n          props.history.push('/bike/' + value._id);\n        }else {\n          props.history.push('/search/' + value);\n        }\n      } else if (reason === 'select-option' && value) {\n        props.history.push('/bike/' + value._id);\n      }\n    }}\n    freeSolo\n    loading={loading}\n    getOptionSelected={(option, value) => option.name === value.name}\n    getOptionLabel={(option) => (typeof option === 'object' && option !== null)\n      ? option.name : option}\n    options={options}\n    renderInput={(params) => (\n      <TextField\n        {...params}\n        margin=\"dense\"\n        variant={props.variant}\n        className={classes.searchTextField}\n        InputProps={{\n          ...params.InputProps,\n          placeholder: 'Search for your bike...',\n          startAdornment: (\n            <InputAdornment position=\"start\">\n              <SearchIcon/>\n            </InputAdornment>\n          ),\n        }}\n      />\n    )}\n  />);\n\n}\n\n// attributes of props and their type\nAutocompleteSearchComponent.propTypes =\n  {\n    variant: PropTypes.string\n  };\n\nexport default withRouter(connect()(AutocompleteSearchComponent));\n"]},"metadata":{},"sourceType":"module"}